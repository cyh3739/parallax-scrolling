!function(a){a.fn.parallax=function(s){return this.each(function(){function t(s){switch(r=!1,c=!1,s){case"up":a(".show").next(":not(#parallax_pages)").length?a(".show").attr("class","up").animate({top:"-100%","z-index":0},o+10).next().attr("class","show").animate({top:0,"z-index":7},o,function(){r=!0,c=!0}):(r=!0,c=!0);break;case"down":a(".show").prev().length?a(".show").attr("class","down").animate({top:"100%","z-index":0},o+10).prev().attr("class","show").animate({top:0,"z-index":7},o,function(){r=!0,c=!0}):(r=!0,c=!0)}}function e(){d.each(function(s){if(a(this).hasClass("show"))return a("#parallax_pages li").removeClass("active").css({background:"#fff"}).eq(s).addClass("active").css({background:"#333"}),!1})}var n=a(this);n.css({position:"relative",overflow:"hidden"}).children().css({width:"100%",height:"100%",position:"absolute",top:"100%",left:0}).addClass("down").eq(0).attr("class","show").css({top:0});var i={speed:300,pages:!0};for(key in s)i[key]=s[key];var o=i.speed,r=!0;n.on("mousewheel DOMMouseScroll",function(a,s){1==r&&(t(s>0?"down":"up"),e())});var c=!0,l=0,p=0;n.bind("touchstart",function(s){l=s.targetTouches[0].pageY,a(this).bind("touchmove",function(a){p=a.targetTouches[0].pageY-l})}).bind("touchend",function(){1==c&&Math.abs(p)>=75&&(t(p>0?"down":"up"),p=0,e())});var d=n.children();if(i.pages){var h='<ul id="parallax_pages" style="position:absolute; right:30px; top:50%; transform:translateY(-50%); z-index:9; list-style:none;">';d.each(function(a){h+=0==a?'<li class="active" style="background:#333; width:15px; height:15px; border-radius:13px; margin:10px 0; cursor:pointer;"></li>':'<li style="background:#fff; width:15px; height:15px; border-radius:13px; margin:10px 0; cursor:pointer;"></li>'}),h+="</ul>",n.append(h)}a("#parallax_pages li").click(function(){if(1==r&&1==c){r=!1,c=!1,a("#parallax_pages li").removeClass("active").css({background:"#fff"}),a(this).addClass("active").css({background:"#333"});var s=a(this).index();d.css({"z-index":0}).eq(s).css({"z-index":7}).attr("class","show").animate({top:0},o,function(){a(this).nextAll(":not(#parallax_pages)").css({top:"100%"}).attr("class","down"),a(this).prevAll().css({top:"-100%"}).attr("class","up"),r=!0,c=!0})}})})}}(jQuery);